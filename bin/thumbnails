#!/usr/bin/env python

import sys, os, getopt
import imtools

__version__ = '0.1'
__doc__ = """
    %s -o|--overwrite -r|--resize directory newsize

    sizes should be formatted like 640x480
    The aspect ratio is preserved in the thumbnail
    if -r then the names are _resize.ext instead of _thumb.ext

""" % sys.argv[0]

    
def main():
    opts, args = getopt.getopt(sys.argv[1:],'or',['overwrite','resize'])

    if len(args) != 2:
        sys.stderr.write('%s\n' % __doc__)
        sys.exit(45)

    # Remove the unused option arguments
    opts = [opt for opt,arg in opts]

    if '-r' in opts or '--resize' in opts:
        ftype = 'reduced'
    else:
        ftype = 'thumb'
    if '-o' in opts or '--overwrite' in opts:
        overwrite=True
    else:
        overwrite=False

    dir = args[0]
    size = imtools.ExtractSize(args[1])
    imtools.ResizeDirImages(dir, size, ftype, overwrite=overwrite)

       
if __name__ == '__main__':
    main()
    

