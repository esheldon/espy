#!/usr/bin/env python
"""
usage: checksum-compare master_list test_list
    Compare checksum list to a master list
"""
import sys

if len(sys.argv) != 3:
    print "usage: checksum-compare master_list test_list"
    sys.exit(45)

master={}
with open(sys.argv[1]) as fobj:
    for line in fobj:
        md5sum,name=line.split()
        name=name[2:]
        master[name]=md5sum

with open(sys.argv[2]) as fobj:
    for line in fobj:
        md5sum,name=line.split()
        name=name[27:]

        if name not in master:
            print '%s missing from master list' % name
        else:
            if md5sum != master[name]:
                print name,'has md5sum',md5sum,'instead of',master[name]
